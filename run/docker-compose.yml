version: '3'

services:
  alexa:
    container_name: al
    image: karsten13/alexa_sdk:rpi
    volumes:
      - /opt/vc:/opt/vc/:ro
      - ./AlexaClientSDKConfig.json:/srv/sdk-folder/sdk-build/Integration/AlexaClientSDKConfig.json
      - ./app-data:/srv/sdk-folder/application-necessities
#      - ./Hilde.pmdl:/srv/sdk-folder/third-party/snowboy/resources/alexa.umdl
    environment:
      - LD_LIBRARY_PATH=/opt/vc/lib
      # default params
      - KITT_AI_SENSITIVITY=0.6
      - KITT_AI_APPLY_FRONT_END_PROCESSING=true
      # params for Hilde.pmdl:
#      - KITT_AI_SENSITIVITY=0.47
#      - KITT_AI_APPLY_FRONT_END_PROCESSING=false
      # audio params, choose "3.5mm" or "HDMI"
      - Audio=3.5mm
    devices:
      - /dev/snd
      - /dev/bus/usb
    entrypoint:
      - ./entrypoint.sh
#      - DEBUG9
#    entrypoint: /bin/bash
#    stdin_open: true
    tty: true      
    restart: always

